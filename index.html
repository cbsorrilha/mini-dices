<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Mini Dices</title>
        <link rel="stylesheet" href="index.css">
    </head>
    <body>

        <div class="panel panel-default">
            <div class="panel-body">
                <div class="dices">
                    <div class="dices-listContainer well">
                        <ul>

                        </ul>
                    </div>
                    <div>
                        <ul>
                            <li>
                                <a class="dice btn btn-default" data-type="100">d100</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
        <script src="index.js" type="text/javascript"></script>
        <script type="text/javascript">

            function printDice(diceObj) {
                var jogador = '<span class="jogador">VocÃª</span>';
                var diceType = '<span class="diceType">' + diceObj.diceType + '</span>';
                var result = '<span class="result">' + diceObj.result + '</span>';
                return "<li>" + jogador + " jogou um " + diceType + " e tirou um " + result + "</li>";
            }

            function refreshList() {

                var all = helper.db.getAll();

                var list = all.map(function (diceObj) {

                    return printDice(diceObj);
                });

                $('.dices-listContainer').html(list);

            }

            $(document).ready(function () {

                refreshList();

                $('.dice').click(function () {
                    var diceType = $(this).attr('data-type');
                    var randomResult = helper.random(1,100);
                    helper.db.save({"diceType": diceType, "result": randomResult});
                    refreshList();


                });

            });
        </script>
    </body>
</html>
